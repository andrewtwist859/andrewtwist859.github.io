<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Responsive Mega Menu with Mobile Version</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      overflow-x: hidden;
    }

    /* Navbar styling */
    .navbar {
      background-color: #fff;
      border-bottom: 1px solid #ccc;
      padding: 1rem 0;
      width: 100%;
      position: relative;
    }

    .navbar-content {
      max-width: 1180px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-brand {
      display: flex;
      align-items: center;
    }

    .logo {
      width: 40px;
      margin-right: 10px;
    }

    .nav-links {
      display: flex;
      list-style: none;
    }

    .nav-item {
      margin-left: 2rem;
      cursor: pointer;
      position: relative;
    }

    /* Mega Menu panel styling */
    .mega-menu-panel {
      display: none;
      position: absolute;
      left: 0;
      width: 100%;
      background-color: #f0f0f0;
      padding: 2rem 0;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      z-index: 100;
    }

    .mega-menu-panel.show {
      display: block;
    }

    /* Content wrapper to constrain width */
    .mega-menu-content {
      max-width: 1180px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: space-around;
    }

    .menu-column {
      flex: 1;
      max-width: 20%;
    }

    .menu-column h4 {
      color: #5b2c90;
      margin-bottom: 10px;
    }

    .menu-column ul {
      list-style: none;
    }

    .menu-column ul li {
      margin-bottom: 8px;
      color: #333;
      cursor: pointer;
    }

    .menu-column ul li:hover {
      text-decoration: underline;
    }

    /* Hamburger menu and mobile styling */
    .hamburger {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
    }

    /* Mobile menu overlay */
    .mobile-menu-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      z-index: 200;
      flex-direction: column;
      align-items: flex-start;
      padding-top: 4rem;
    }

    .mobile-menu-panel, .mobile-submenu-panel {
      width: 100%;
      background-color: #fff;
      padding: 3rem;
      display: flex;
      flex-direction: column;
      position: absolute;
      top: 0;
      left: 100%; /* Off-screen initially */
      height: 100%;
      overflow-y: auto;
      transition: left 0.3s ease;
    }

    .mobile-menu-panel.show,
    .mobile-submenu-panel.show {
      left: 0; /* Slide in */
    }

    .mobile-menu-panel h4, .mobile-submenu-panel h4,
    .mobile-menu-panel ul li, .mobile-submenu-panel ul li {
      margin-bottom: 1rem;
      cursor: pointer;
    }

    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      font-size: 1.5rem;
      color: black;
      cursor: pointer;
      z-index: 300; /* Ensures it appears above overlay content */
    }

    .back-btn {
      font-size: 1rem;
      color: #333;
      margin-bottom: 1rem;
      cursor: pointer;
    }

    /* Responsive styling */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .hamburger {
        display: block;
      }
    }
  </style>
</head>
<body>

  <nav class="navbar">
    <div class="navbar-content">
      <div class="navbar-brand">
        <img src="logo.png" alt="University of Sheffield Logo" class="logo">
        <span>University of Sheffield</span>
      </div>
      <ul class="nav-links">
        <li class="nav-item" onclick="togglePanel('study-panel')">Study</li>
        <li class="nav-item" onclick="togglePanel('research-panel')">Research</li>
        <li class="nav-item" onclick="togglePanel('collaborate-panel')">Collaborate</li>
        <li class="nav-item" onclick="togglePanel('about-panel')">About</li>
      </ul>
      <div class="hamburger" onclick="toggleMobileMenu()">☰</div>
    </div>
  </nav>

  <!-- Mega Menu Panels (Desktop) -->
  <div class="mega-menu-panel" id="study-panel">
    <div class="mega-menu-content">
      <div class="menu-column">
        <h4>Undergraduate</h4>
        <ul>
          <li>Undergraduate courses</li>
          <li>Undergraduate open days</li>
          <li>How to apply</li>
          <li>Fees and funding</li>
          <li>Accommodation</li>
          <li>International students</li>
        </ul>
      </div>
      <div class="menu-column">
        <h4>Postgraduate taught</h4>
        <ul>
          <li>Postgraduate taught courses</li>
          <li>Postgraduate open days</li>
          <li>How to apply</li>
          <li>Fees and funding</li>
          <li>International students</li>
        </ul>
      </div>
      <div class="menu-column">
        <h4>PhD study</h4>
        <ul>
          <li>Find a PhD</li>
          <li>How to apply</li>
          <li>PhD fees</li>
          <li>PhD scholarships</li>
        </ul>
      </div>
      <div class="menu-column">
        <h4>Other ways to study</h4>
        <ul>
          <li>Apprenticeships</li>
          <li>Mature students</li>
          <li>Online learning</li>
          <li>TEFL and English as a second language</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu-overlay" id="mobile-menu-overlay">
    <div class="close-btn" onclick="toggleMobileMenu()">✖</div>
    <div class="mobile-menu-panel" id="main-mobile-panel">
      <h4 onclick="openSubmenu('mobile-study-panel')">Study</h4>
      <h4 onclick="openSubmenu('mobile-research-panel')">Research</h4>
      <h4 onclick="openSubmenu('mobile-collaborate-panel')">Collaborate</h4>
      <h4 onclick="openSubmenu('mobile-about-panel')">About</h4>
    </div>

    <!-- Study Submenu Panel (Showing H4s only) -->
    <div class="mobile-submenu-panel" id="mobile-study-panel">
      <div class="back-btn" onclick="closeSubmenu('mobile-study-panel')">← Back</div>
      <h4 onclick="openSubmenu('mobile-study-undergraduate')">Undergraduate</h4>
      <h4 onclick="openSubmenu('mobile-study-postgraduate')">Postgraduate taught</h4>
      <h4 onclick="openSubmenu('mobile-study-phd')">PhD study</h4>
      <h4 onclick="openSubmenu('mobile-study-other')">Other ways to study</h4>
    </div>

    <!-- Study Category Panels (Third-level Panels) -->
    <div class="mobile-submenu-panel" id="mobile-study-undergraduate">
      <div class="back-btn" onclick="closeSubmenu('mobile-study-undergraduate')">← Back</div>
      <h4>Undergraduate</h4>
      <ul>
        <li>Undergraduate courses</li>
        <li>Undergraduate open days</li>
        <li>How to apply</li>
        <li>Fees and funding</li>
        <li>Accommodation</li>
        <li>International students</li>
      </ul>
    </div>

    <div class="mobile-submenu-panel" id="mobile-study-postgraduate">
      <div class="back-btn" onclick="closeSubmenu('mobile-study-postgraduate')">← Back</div>
      <h4>Postgraduate taught</h4>
      <ul>
        <li>Postgraduate taught courses</li>
        <li>Postgraduate open days</li>
        <li>How to apply</li>
        <li>Fees and funding</li>
        <li>International students</li>
      </ul>
    </div>

    <div class="mobile-submenu-panel" id="mobile-study-phd">
      <div class="back-btn" onclick="closeSubmenu('mobile-study-phd')">← Back</div>
      <h4>PhD study</h4>
      <ul>
        <li>Find a PhD</li>
        <li>How to apply</li>
        <li>PhD fees</li>
        <li>PhD scholarships</li>
      </ul>
    </div>

    <div class="mobile-submenu-panel" id="mobile-study-other">
      <div class="back-btn" onclick="closeSubmenu('mobile-study-other')">← Back</div>
      <h4>Other ways to study</h4>
      <ul>
        <li>Apprenticeships</li>
        <li>Mature students</li>
        <li>Online learning</li>
        <li>TEFL and English as a second language</li>
      </ul>
    </div>
  </div>

  <script>
    function toggleMobileMenu() {
      const overlay = document.getElementById('mobile-menu-overlay');
      overlay.style.display = overlay.style.display === 'flex' ? 'none' : 'flex';
      document.getElementById('main-mobile-panel').style.left = '0';
    }

    function openSubmenu(panelId) {
      document.querySelectorAll('.mobile-submenu-panel').forEach(panel => panel.classList.remove('show'));
      document.getElementById(panelId).classList.add('show');
    }

    function closeSubmenu(panelId) {
      document.getElementById(panelId).classList.remove('show');
    }
  </script>

</body>
</html>
